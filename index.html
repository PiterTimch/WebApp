<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Clicker Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Clicker Game</h1>
        <p>Click Count: <span id="clickCount">0</span></p>
        <button id="clickButton"><img src="Images/ClickLogo.jpg" alt="Click Button"></button>
    </div>
    <div class="menuContainer">
        <p>Energy: <span id="energy">0</span></p>
        <button id="boostButton">Boost</button>
        <button id="energyBoostButton">Energy Boost</button>
        <button id="energyMaxButton">Energy Max</button>
        <button id="botButton">Bot</button>
    </div>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>

        let tg = window.Telegram.WebApp;

        

        let clickCount = 0.0;
        let energy = 500;

        let boost = 0.00001;
        let boosPrice = 0.02;

        let energyPrice = 0.02;
        let energyBoost = 1;

        let energyMax = 500;
        let energyMaxPrice = 0.02;

        let haveAutoClicker = false;
        let autoClickerPrice = 0.00002;

        const clickButton = document.getElementById('clickButton');
        const clickCountDisplay = document.getElementById('clickCount');
        const clickEnergy = document.getElementById('energy');
        const clickImage = document.querySelector('button img');
        const upgradeBoostButton = document.getElementById('boostButton');
        const upgradeEnergyButton = document.getElementById('energyBoostButton');
        const upgradeEnergyMaxButton = document.getElementById('energyMaxButton');
        const buyAutoclickerButton = document.getElementById('botButton');

        clickEnergy.textContent = energy;

        clickButton.addEventListener('click', () => {
            clickCount += boost;
            energy--;
            clickEnergy.textContent = energy;
            clickCountDisplay.textContent = clickCount.toFixed(5);

            tg.sendData(JSON.stringify(document.getElementById('clickCount')));

            clickImage.classList.add('animated');
            setTimeout(() => {
                clickImage.classList.remove('animated');
            }, 100);
        });

        upgradeBoostButton.addEventListener('click', () =>{
            if(clickCount > boosPrice){
                clickCount -= boosPrice;
                clickCountDisplay.textContent = clickCount;
                boost += 0.00001;
                boosPrice *= 2;
                clickCountDisplay.textContent = clickCount.toFixed(5);
            }
        });

        upgradeEnergyButton.addEventListener('click', () =>{
            if(clickCount > energyPrice){
                clickCount -= energyPrice;
                clickCountDisplay.textContent = clickCount;
                energyBoost++;
                energyPrice *= 2;
                clickCountDisplay.textContent = clickCount.toFixed(5);
            }
        });

        upgradeEnergyButton.addEventListener('click', () =>{
            if(clickCount > energyPrice){
                clickCount -= energyPrice;
                clickCountDisplay.textContent = clickCount;
                energyBoost++;
                energyPrice *= 2;
                clickCountDisplay.textContent = clickCount.toFixed(5);
            }
        });

        upgradeEnergyMaxButton.addEventListener('click', () =>{
            if(clickCount > energyMaxPrice){
                clickCount -= energyMaxPrice;
                clickCountDisplay.textContent = clickCount;
                energyMax += 500;
                energyMaxPrice *= 2;
                clickCountDisplay.textContent = clickCount.toFixed(5);
            }
        });

        buyAutoclickerButton.addEventListener('click', () =>{
            if(clickCount > autoClickerPrice && !haveAutoClicker){
                clickCount -= autoClickerPrice;
                clickCountDisplay.textContent = clickCount;
                haveAutoClicker = true;
                clickCountDisplay.textContent = clickCount.toFixed(5);
            }
        });

        setInterval(() => {
            if(energy + energyBoost < energyMax){
                energy += energyBoost;
                clickEnergy.textContent = energy;
            }
            else{
                energy = energyMax;
                clickEnergy.textContent = energy;
            }
        }, 2000);

        setInterval(() => {
            if(haveAutoClicker == true){

                clickCount += boost;
                clickCountDisplay.textContent = clickCount.toFixed(5);

                clickImage.classList.add('animated');
                setTimeout(() => {
                    clickImage.classList.remove('animated');
                }, 100);

            }
        }, 6000);


    </script>
</body>
</html>
